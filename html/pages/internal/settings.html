{{ define "content" }}
<section class="section">
    <div class="columns is-centered">
        <div class="column">
            <form method="POST" action="">
                <div class="field">
                    <div class="label">
                        <label class="label">NOME DA CASA</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <p class="control is-expanded">
                                <input name="name" class="input" type="text" placeholder="Nome da casa">
                            </p>
                        </div>
                    </div>
                </div>
                <div class="field">
                    <div class="field-body">
                        <div class="field is-grouped is-grouped-centered">
                            <div class="control">
                                <button class="button is-primary">
                                    SALVAR
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>


            <span class="label mt-5">
                PESSOAS
            </span>

            <!--div>
                <a href="#">
                    <figure>
                    <img src="https://bulma.io/images/placeholders/128x128.png">
                    <caption>...</caption>
                    </figure>
                </a>
                <a href="#"><img src="https://bulma.io/images/placeholders/128x128.png"></a>
                <a href="#"><img src="https://bulma.io/images/placeholders/128x128.png"></a>
                <a href="/invite" ><i class="fa fa-5x fa-plus-circle"></i></a>
                
            </div-->

            <div id="people" class="columns is-mobile h-overflow">
                
            </div>
        </div>

        <div class="column">
            <h1 class="title">INSTRUÇÕES</h1>
            <br>
            <p>Nesta página você poderá configurar sua casa
                assim como também os usuários da casa e suas
                permissões, caso seja administrador.</p>
            <br>
            <p>Se você usuário mude seu email, credenciais
                entre outras informações em seu perfil.</p>

        </div>
    </div>
</section>
{{ end }}

{{ define "script" }}

<script>
        function fillPeople() {
            let data = axios.get('/v1/people')
            
            data.then(response => {                
                response.data.Content.forEach(element => {
                    console.log(element)

                    $('#people').append(
                    '<div class="column is-3">'
                        +'<a href="#">'
                            +'<div class="card">'
                                +'<div class="card-image">'
                                    +'<figure class="image">'
                                        +'<img class="is-rounded" src="https://bulma.io/images/placeholders/128x128.png" alt="Placeholder image">'
                                    +'</figure>'
                                +'</div>'
                                +'<div class="card-content is-paddingless">'
                                    +'<p class="mt-5 is-size-6">' + element.Name + '</p>'
                                +'</div>'
                            +'</div>'
                        +'</a>'
                    +'</div>'
                    )
                })

                $('#people').append(
                    '<div class="column is-3">'
                        +'<a href="/invite">'
                            +'<div class="card">'
                                +'<div class="card-image">'
                                    +'<figure class="image">'
                                        +'<i class="fa fa-5x fa-plus-circle "></i>'
                                    +'</figure>'
                                +'</div>'
                                +'<div class="card-content is-paddingless">'
                                    +'<p class="mt-5 is-size-6">Convidar pessoas</p>'
                                +'</div>'
                            +'</div>'
                        +'</a>'
                    +'</div>'
                )

            });
            
            data.catch(error => {
                window.alert('Ocorreu um erro ao carregar as informaÃ§Ãµes. Entre' + 
                    ' em contato com o desenvolvedor.')
                console.log(error)
            })
        } 

        fillPeople();
    </script>

{{ end }}